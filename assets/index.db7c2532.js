import{m as d,p as g,l as v,a as x,F as w,o as p,c as m,r as F,b as h,t as _,d as c,e as f,w as u,f as r,g as S,B as N}from"./vendor.8a9e3fe4.js";const E=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}};E();var b=(e,n)=>{const a=e.__vccOpts||e;for(const[l,t]of n)a[l]=t;return a};const i=(e,n)=>typeof e===n,A={name:"JsonCSV",props:{data:{type:Array,required:!0},fields:{required:!1},name:{type:String,default:"data.csv"},delimiter:{type:String,default:",",required:!1},separatorExcel:{type:Boolean,default:!1},encoding:{type:String,default:"utf-8"},advancedOptions:{type:Object,default:()=>{}},labels:{required:!1},testing:{required:!1,default:!1}},computed:{idName(){const e=new Date().getTime();return"export_"+e},exportableData(){const e=this.cleaningData();return e.length?e:null}},methods:{labelsFunctionGenerator(){if(!i(this.labels,"undefined")&&!i(this.labels,"function")&&!i(this.labels,"object"))throw new Error("Labels needs to be a function(value,key) or object.");return i(this.labels,"function")?e=>d(e,this.labels):i(this.labels,"object")?e=>d(e,(n,a)=>this.labels[a]||a):e=>e},fieldsFunctionGenerator(){if(!i(this.fields,"undefined")&&!i(this.fields,"function")&&!i(this.fields,"object")&&!Array.isArray(this.fields))throw new Error("Fields needs to be a function(value,key) or array.");return i(this.fields,"function")||i(this.fields,"object")&&!Array.isArray(this.fields)?e=>g(e,this.fields):Array.isArray(this.fields)?e=>v(e,this.fields):e=>e},cleaningData(){if(i(this.fields,"undefined")&&i(this.labels,"undefined"))return this.data;const e=this.labelsFunctionGenerator(),n=this.fieldsFunctionGenerator();return this.data.map(a=>e(n(a)))},generate(){this.$emit("export-started");const e=this.exportableData;if(!e){console.error("No data to export");return}let n=x.exports.unparse(e,Object.assign({delimiter:this.delimiter,encoding:this.encoding},this.advancedOptions));if(this.separatorExcel&&(n="SEP="+this.delimiter+`\r
`+n),this.encoding==="utf-8"&&(n="\uFEFF"+n),this.$emit("export-finished"),!this.testing){let a=new Blob([n],{type:"application/csvcharset="+this.encoding});w.exports.saveAs(a,this.name)}}}},D=["id"];function O(e,n,a,l,t,s){return p(),m("div",{id:s.idName,onClick:n[0]||(n[0]=(...o)=>s.generate&&s.generate(...o))},[F(e.$slots,"default",{},()=>[h("Download "+_(a.name),1)],!0)],8,D)}var C=b(A,[["render",O],["__scopeId","data-v-2943d42a"]]);const J={name:"App",components:{"download-csv":C},computed:{readableJson:function(){return JSON.stringify(this.jsonData,null,2)}},data(){return{jsonData:[{id:1,fname:"Jesse",lname:"Simmons",date:"2016-10-15 13:43:27",gender:"Male"},{id:2,fname:"John",lname:"Jacobs",date:"2016-12-15 06:00:53",gender:"Male"},{id:3,fname:"Tina",lname:"Gilbert",date:"2016-04-26 06:26:28",gender:"Female"},{id:4,fname:"Clarence",lname:"Flores",date:"2016-04-10 10:28:46",gender:"Male"},{id:5,fname:"Anne",lname:"Lee",date:"2016-12-06 14:38:38",gender:"Female"},{id:6,fname:"\u4F5F\u535A",lname:"\u80FD\u5A1C",date:"2016-12-06 14:38:38",gender:"Male"},{id:7,fname:"\u0160ir\u016F\u010Dkov\xE1",lname:"Tereza",date:"2019-12-06 14:38:38",gender:"Female"}],dataFile:"my_export.csv",labels:{fname:"First Name",lname:"Last Name"},fields:["id","fname","lname","date"],isExported:!1}},methods:{exported(e){console.log(e),this.isExported=!0,setTimeout(()=>{this.isExported=!1},3*1e3)}}},j={class:"container is-widescreen"},k=r("h1",{class:"title"}," JSON to CSV ",-1),B=h(" File Exported "),L={class:"notification has-text-centered"},V=r("p",{class:"subtitle"},"Click on the button to download the following JSON in CSV.",-1),T=r("p",{class:"subtitle"},"The fname and lname will be replaced by First Name and Last Name in the CSV.",-1),q=r("p",{class:"subtitle"},"By default the file will be encoded in UTF8.",-1),G=r("button",{class:"button"},"Download",-1);function M(e,n,a,l,t,s){const o=c("b-notification"),y=c("download-csv");return p(),m("div",j,[k,f(o,{active:t.isExported},{default:u(()=>[B]),_:1},8,["active"]),r("div",L,[V,T,q,r("div",null,[f(y,{data:t.jsonData,name:t.dataFile,labels:t.labels,fields:t.fields,onExportFinished:s.exported},{default:u(()=>[G]),_:1},8,["data","name","labels","fields","onExportFinished"])])]),r("div",null,[r("pre",null,_(s.readableJson),1)])])}var K=b(J,[["render",M]]);window.vue=S(K).mount("#app");window.vue.use(N);
